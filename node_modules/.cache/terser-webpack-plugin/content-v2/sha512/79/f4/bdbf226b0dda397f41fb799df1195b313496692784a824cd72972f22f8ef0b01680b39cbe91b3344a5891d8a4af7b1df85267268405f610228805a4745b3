{"code":"(this.webpackJsonpfoodexo=this.webpackJsonpfoodexo||[]).push([[0],{40:function(e,t,n){},43:function(e,t,n){\"use strict\";n.r(t);var r=n(1),i=n.n(r),a=n(23),o=n.n(a),c=n(5),u=n(2),s=n(10),l=(n(40),n(41),n(0)),d=function(){var e=Object(r.useRef)(),t=Object(r.useState)({}),n=Object(c.a)(t,2),i=n[0],a=n[1],o=Object(r.useState)(-.112869),d=Object(c.a)(o,2),m=d[0],f=d[1],j=Object(r.useState)(51.504),p=Object(c.a)(j,2),g=p[0],v=p[1],b=function(e){return{point:{latitude:e.lat,longitude:e.lng}}};return Object(r.useEffect)((function(){var t={lng:m,lat:g},n=[],r=u.map({key:\"jrtB0v2Ampkn3VjAAqJmM7Mi3JHMzLuD\",container:e.current,stylesVisibility:{trafficIncidents:!0,trafficFlow:!0},center:[m,g],zoom:14});a(r);!function(){var e=new u.Popup({offset:{bottom:[0,-25]}}).setHTML(\"This is you!\"),t=document.createElement(\"div\");t.className=\"marker\";var n=new u.Marker({draggable:!0,element:t}).setLngLat([m,g]).addTo(r);n.on(\"dragend\",(function(){var e=n.getLngLat();f(e.lng),v(e.lat)})),n.setPopup(e).togglePopup()}();var i=function(){(function(e){var n={key:\"jrtB0v2Ampkn3VjAAqJmM7Mi3JHMzLuD\",destinations:e.map((function(e){return b(e)})),origins:[b(t)]};return new Promise((function(t,r){s.services.matrixRouting(n).then((function(n){var r=n.matrix[0].map((function(t,n){return{location:e[n],drivingtime:t.response.routeSummary.travelTimeInSeconds}}));r.sort((function(e,t){return e.drivingtime-t.drivingtime}));var i=r.map((function(e){return e.location}));t(i)}))}))})(n).then((function(e){e.unshift(t),s.services.calculateRoute({key:\"jrtB0v2Ampkn3VjAAqJmM7Mi3JHMzLuD\",locations:e}).then((function(e){!function(e,t){t.getLayer(\"route\")&&(t.removeLayer(\"route\"),t.removeSource(\"route\")),t.addLayer({id:\"route\",type:\"line\",source:{type:\"geojson\",data:e},paint:{\"line-color\":\"#4a90e2\",\"line-width\":6}})}(e.toGeoJson(),r)}))}))};return r.on(\"click\",(function(e){n.push(e.lngLat),function(e,t){var n=document.createElement(\"div\");n.className=\"marker-delivery\",new u.Marker({element:n}).setLngLat(e).addTo(t)}(e.lngLat,r),i()})),function(){return r.remove()}}),[m,g]),Object(l.jsx)(l.Fragment,{children:i&&Object(l.jsxs)(\"div\",{className:\"app\",children:[Object(l.jsx)(\"div\",{ref:e,className:\"map\"}),Object(l.jsxs)(\"div\",{className:\"search-bar\",children:[Object(l.jsx)(\"h1\",{children:\"Where to?\"}),Object(l.jsx)(\"input\",{type:\"text\",id:\"longitude\",className:\"longitude\",placeholder:\"Put in Longitude\",onChange:function(e){f(e.target.value)}}),Object(l.jsx)(\"input\",{type:\"text\",id:\"latitude\",className:\"latitude\",placeholder:\"Put in latitude\",onChange:function(e){v(e.target.value)}})]})]})})};o.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(d,{})}),document.getElementById(\"root\"))}},[[43,1,2]]]);","name":"static/js/main.12b4ae18.chunk.js","map":{"version":3,"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","slicedToArray","maps_min","services_min","jsx_runtime","src_App_0","mapElement","Object","_useState","_useState2","map","setMap","_useState3","_useState4","longitude","setLongitude","_useState5","_useState6","latitude","setLatitude","convertToPoints","lngLat","point","lat","lng","origin","destinations","key","container","current","stylesVisibility","trafficIncidents","trafficFlow","center","zoom","popup","offset","bottom","setHTML","element","document","createElement","className","marker","draggable","setLngLat","addTo","on","getLngLat","setPopup","togglePopup","addMarker","recalculateRoutes","locations","callParameters","destination","origins","Promise","resolve","reject","matrixRouting","then","matrixAPIResults","resultsArray","matrix","result","index","location","drivingtime","response","routeSummary","travelTimeInSeconds","sort","a","b","sortedLocations","sortDestinations","sorted","unshift","calculateRoute","routeData","geoJson","getLayer","removeLayer","removeSource","addLayer","id","type","source","data","paint","drawRoute","toGeoJson","e","addDeliveryMarker","remove","children","ref","placeholder","onChange","target","value","render","StrictMode","getElementById"],"sources":["static/js/main.12b4ae18.chunk.js"],"mappings":"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"},"input":"(this[\"webpackJsonpfoodexo\"] = this[\"webpackJsonpfoodexo\"] || []).push([[0],{\n\n/***/ 40:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 43:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(23);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/@tomtom-international/web-sdk-maps/dist/maps.min.js\nvar maps_min = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./node_modules/@tomtom-international/web-sdk-services/dist/services.min.js\nvar services_min = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./src/App.css\nvar src_App = __webpack_require__(40);\n\n// EXTERNAL MODULE: ./node_modules/@tomtom-international/web-sdk-maps/dist/maps.css\nvar maps = __webpack_require__(41);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/App.js\nvar App_App=function App(){var mapElement=Object(react[\"useRef\"])();var _useState=Object(react[\"useState\"])({}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),map=_useState2[0],setMap=_useState2[1];var _useState3=Object(react[\"useState\"])(-0.112869),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),longitude=_useState4[0],setLongitude=_useState4[1];var _useState5=Object(react[\"useState\"])(51.504),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),latitude=_useState6[0],setLatitude=_useState6[1];var convertToPoints=function convertToPoints(lngLat){return{point:{latitude:lngLat.lat,longitude:lngLat.lng}};};var drawRoute=function drawRoute(geoJson,map){if(map.getLayer('route')){map.removeLayer('route');map.removeSource('route');}map.addLayer({id:'route',type:'line',source:{type:'geojson',data:geoJson},paint:{'line-color':'#4a90e2','line-width':6}});};var addDeliveryMarker=function addDeliveryMarker(lngLat,map){var element=document.createElement('div');element.className='marker-delivery';new maps_min[\"Marker\"]({element:element}).setLngLat(lngLat).addTo(map);};Object(react[\"useEffect\"])(function(){var origin={lng:longitude,lat:latitude};var destinations=[];var map=maps_min[\"map\"]({key:\"jrtB0v2Ampkn3VjAAqJmM7Mi3JHMzLuD\",container:mapElement.current,stylesVisibility:{trafficIncidents:true,trafficFlow:true},center:[longitude,latitude],zoom:14});setMap(map);var addMarker=function addMarker(){var popupOffset={bottom:[0,-25]};var popup=new maps_min[\"Popup\"]({offset:popupOffset}).setHTML('This is you!');var element=document.createElement('div');element.className='marker';var marker=new maps_min[\"Marker\"]({draggable:true,element:element}).setLngLat([longitude,latitude]).addTo(map);marker.on('dragend',function(){var lngLat=marker.getLngLat();setLongitude(lngLat.lng);setLatitude(lngLat.lat);});marker.setPopup(popup).togglePopup();};addMarker();var sortDestinations=function sortDestinations(locations){var pointsForDestinations=locations.map(function(destination){return convertToPoints(destination);});var callParameters={key:\"jrtB0v2Ampkn3VjAAqJmM7Mi3JHMzLuD\",destinations:pointsForDestinations,origins:[convertToPoints(origin)]};return new Promise(function(resolve,reject){services_min[\"services\"].matrixRouting(callParameters).then(function(matrixAPIResults){var results=matrixAPIResults.matrix[0];var resultsArray=results.map(function(result,index){return{location:locations[index],drivingtime:result.response.routeSummary.travelTimeInSeconds};});resultsArray.sort(function(a,b){return a.drivingtime-b.drivingtime;});var sortedLocations=resultsArray.map(function(result){return result.location;});resolve(sortedLocations);});});};var recalculateRoutes=function recalculateRoutes(){sortDestinations(destinations).then(function(sorted){sorted.unshift(origin);services_min[\"services\"].calculateRoute({key:\"jrtB0v2Ampkn3VjAAqJmM7Mi3JHMzLuD\",locations:sorted}).then(function(routeData){var geoJson=routeData.toGeoJson();drawRoute(geoJson,map);});});};map.on('click',function(e){destinations.push(e.lngLat);addDeliveryMarker(e.lngLat,map);recalculateRoutes();});return function(){return map.remove();};},[longitude,latitude]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:map&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"app\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:mapElement,className:\"map\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\"Where to?\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",id:\"longitude\",className:\"longitude\",placeholder:\"Put in Longitude\",onChange:function onChange(e){setLongitude(e.target.value);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",id:\"latitude\",className:\"latitude\",placeholder:\"Put in latitude\",onChange:function onChange(e){setLatitude(e.target.value);}})]})]})});};/* harmony default export */ var src_App_0 = (App_App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App_0,{})}),document.getElementById('root'));\n\n/***/ })\n\n},[[43,1,2]]]);","inputSourceMap":{"version":3,"sources":["F:\\PROGRAM\\REACT\\Foodexo\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!F:\\PROGRAM\\REACT\\Foodexo\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!F:\\PROGRAM\\REACT\\Foodexo\\node_modules\\postcss-loader\\src\\index.js??postcss!F:\\PROGRAM\\REACT\\Foodexo\\src\\App.css","F:/PROGRAM/REACT/Foodexo/src/App.js","F:/PROGRAM/REACT/Foodexo/src/index.js"],"names":["App","mapElement","useRef","_useState","useState","_useState2","_slicedToArray","map","setMap","_useState3","_useState4","longitude","setLongitude","_useState5","_useState6","latitude","setLatitude","convertToPoints","lngLat","point","lat","lng","drawRoute","geoJson","getLayer","removeLayer","removeSource","addLayer","id","type","source","data","paint","addDeliveryMarker","element","document","createElement","className","tt","setLngLat","addTo","useEffect","origin","destinations","key","process","container","current","stylesVisibility","trafficIncidents","trafficFlow","center","zoom","addMarker","popupOffset","bottom","popup","offset","setHTML","marker","draggable","on","getLngLat","setPopup","togglePopup","sortDestinations","locations","pointsForDestinations","destination","callParameters","origins","Promise","resolve","reject","ttapi","matrixRouting","then","matrixAPIResults","results","matrix","resultsArray","result","index","location","drivingtime","response","routeSummary","travelTimeInSeconds","sort","a","b","sortedLocations","recalculateRoutes","sorted","unshift","calculateRoute","routeData","toGeoJson","e","push","remove","_jsx","_Fragment","children","_jsxs","ref","placeholder","onChange","target","value","ReactDOM","render","React","StrictMode","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","import { useRef, useEffect, useState } from 'react'\nimport * as tt from '@tomtom-international/web-sdk-maps'\nimport * as ttapi from '@tomtom-international/web-sdk-services'\nimport './App.css'\nimport '@tomtom-international/web-sdk-maps/dist/maps.css'\n\nconst App = () => {\n  const mapElement = useRef()\n  const [map, setMap] = useState({})\n  const [longitude, setLongitude] = useState(-0.112869)\n  const [latitude, setLatitude] = useState(51.504)\n\n  const convertToPoints = (lngLat) => {\n    return {\n      point: {\n        latitude: lngLat.lat,\n        longitude: lngLat.lng\n      }\n    }\n  }\n\n  const drawRoute = (geoJson, map) => {\n    if (map.getLayer('route')) {\n      map.removeLayer('route')\n      map.removeSource('route')\n    }\n    map.addLayer({\n      id: 'route',\n      type: 'line',\n      source: {\n        type: 'geojson',\n        data: geoJson\n      },\n      paint: {\n        'line-color': '#4a90e2',\n        'line-width': 6\n  \n      }\n    })\n  }\n\n  const addDeliveryMarker = (lngLat, map) => {\n    const element = document.createElement('div')\n    element.className = 'marker-delivery'\n    new tt.Marker({\n      element: element\n    })\n    .setLngLat(lngLat)\n    .addTo(map)\n  }\n\n  useEffect(() => {\n    const origin = {\n      lng: longitude,\n      lat: latitude,\n    }\n    const destinations = []\n\n    let map = tt.map({\n      key: process.env.REACT_APP_TOM_TOM_API_KEY,\n      container: mapElement.current,\n      stylesVisibility: {\n        trafficIncidents: true,\n        trafficFlow: true,\n      },\n      center: [longitude, latitude],\n      zoom: 14,\n    })\n    setMap(map)\n\n    const addMarker = () => {\n      const popupOffset = {\n        bottom: [0, -25]\n      }\n      const popup = new tt.Popup({ offset: popupOffset }).setHTML('This is you!')\n      const element = document.createElement('div')\n      element.className = 'marker'\n\n      const marker = new tt.Marker({\n        draggable: true,\n        element: element,\n      })\n        .setLngLat([longitude, latitude])\n        .addTo(map)\n      \n      marker.on('dragend', () => {\n        const lngLat = marker.getLngLat()\n        setLongitude(lngLat.lng)\n        setLatitude(lngLat.lat)\n      })\n\n      marker.setPopup(popup).togglePopup()\n      \n    }\n    addMarker()\n\n    const sortDestinations = (locations) => {\n      const pointsForDestinations = locations.map((destination) => {\n        return convertToPoints(destination)\n      })\n      const callParameters = {\n        key: process.env.REACT_APP_TOM_TOM_API_KEY,\n        destinations: pointsForDestinations,\n        origins: [convertToPoints(origin)],\n      }\n\n    return new Promise((resolve, reject) => {\n      ttapi.services\n        .matrixRouting(callParameters)\n        .then((matrixAPIResults) => {\n          const results = matrixAPIResults.matrix[0]\n          const resultsArray = results.map((result, index) => {\n            return {\n              location: locations[index],\n              drivingtime: result.response.routeSummary.travelTimeInSeconds,\n            }\n          })\n          resultsArray.sort((a, b) => {\n            return a.drivingtime - b.drivingtime\n          })\n          const sortedLocations = resultsArray.map((result) => {\n            return result.location\n          })\n          resolve(sortedLocations)\n        })\n      })\n    }\n\n    const recalculateRoutes = () => {\n      sortDestinations(destinations).then((sorted) => {\n        sorted.unshift(origin)\n\n        ttapi.services\n          .calculateRoute({\n            key: process.env.REACT_APP_TOM_TOM_API_KEY,\n            locations: sorted,\n          })\n          .then((routeData) => {\n            const geoJson = routeData.toGeoJson()\n            drawRoute(geoJson, map)\n        })\n      })\n    }\n\n\n    map.on('click', (e) => {\n      destinations.push(e.lngLat)\n      addDeliveryMarker(e.lngLat, map)\n      recalculateRoutes()\n    })\n\n    return () => map.remove()\n  }, [longitude, latitude])\n\n  return (\n    <>\n      {map && (\n        <div className=\"app\">\n          <div ref={mapElement} className=\"map\" />\n          <div className=\"search-bar\">\n            <h1>Where to?</h1>\n            <input\n              type=\"text\"\n              id=\"longitude\"\n              className=\"longitude\"\n              placeholder=\"Put in Longitude\"\n              onChange={(e) => {\n                setLongitude(e.target.value)\n              }}\n            />\n            <input\n              type=\"text\"\n              id=\"latitude\"\n              className=\"latitude\"\n              placeholder=\"Put in latitude\"\n              onChange={(e) => {\n                setLatitude(e.target.value)\n              }}\n            />\n          </div>\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)"]}}